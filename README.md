# jwp-basic
자바 웹 프로그래밍 기본 실습

# 9장. 두 번째 양파 껍질을 벗기기 위한 중간 점검
## 9.1 자체 점검 요구사항(필수)

https://dev-ljw1126.tistory.com/406

요구사항1)
> 로컬 개발 환경에 톰캣 서버를 시작하면 서블릿 컨테이너의 초기화 과정이 진행된다.
> 현재 소스코드에서 초기화되는 과정에 대해 설명하라 (WebServerLauncher의 시작과정이 아니라 프로젝트의 초기화 과정이다)

---
요구사항2) 
> 로컬 개발환경에서 톰캣 서버를 시작한 후 http://localhost:8080으로 접근해서 질문 목록이 보이기까지 소스코드의 호출 순서 및 흐름을 설명하라.


---
요구사항3)
> 질문하기 기능을 구현한다.
> 질문 추가 로직은 QuestionDao 클래스의 insert()메서드를 활용한다.
> 질문하기를 성공한 후 질문 목록 페이지("/")로 이동해야 한다.

---
요구사항4)
> 로그인한 사용자만 질문이 가능하도록 수정한다.
> 또한 질문할 때 글쓴이를 입력하지 않고 로그인한 사용자 정보를 가져와 글쓴이 이름으로 사용하도록 구현한다.

---
요구사항5) - 기능 구현 완료 
> 질문 목록에서 제목을 클릭하면 상세보기 화면으로 이동한다.
> 상세보기 화면에서 답변 목록을 정적인 HTML이 아니라 DB에 저장되 어있는 답변을 출력하도록 구현한다.
> 단 <% %>와 같이 스크립틀릿을 사용하 지않고, JSTL과 EL만으로 구현해야 한다.

---
요구사항6) - CharacterEncodingFilter 구현 완료
> 자바 기반으로 웹 프로그래밍을 할 경우 한글이 깨진다. 
> 한글이 깨지는 문제를 해결하기 위해 ServletFilter를 활용해 문제를 해결할 수 있다.
> core.web.filter.CharacterEncodingFilter에 애노테이션 설정을 통해 한글 문제를 해결한다.

---
요구사항7)
> next.web.qna 패키지의 ShowController는 멀티스레드 상황에서 문제가 발생할 가능성이 있는 코드이다
> 멀티스레드 상황에서 문제가 발생하지 않도록 수정한다.
> 그리고 멀티스레드에서 문제가 되는 이유를 작성하라

---
요구사항8)
> 상세보기 화면에서 답변하기 기능은 정상적으로 동작한다.
> 단, 답변을 추가할 경우 댓글의 수가 증가하지 않는다.
> 답변을 추가하는 시점에 질문의 댓글 수도 1증가하도록 로직을 구현한다

---
요구사항9)
> 이 Q&A 서비스는 모바일에서도 서비스할 계획이라 API를 추가해야 한다.
> API는 JSON 형식으로 제공할 계획이다. /api/qna/list URL로 접근했을 때 질문 목록을 JSON데이터로 조회할 수 있도록 구현한다.

---
요구사항10) - 구현 완료
> 상세보기 화면의 답변 목록에서 답변을 삭제해야 한다.
> 답변 삭제 또한 화면을 깜빡이지 않고 구현이 가능하도록 AJAX로 구현한다.

---
요구사항11)
> 질문 수정이 가능해야 한다. 질문수정은 글쓴이와 로그인 사용자가 같은 경우에만 수정이 가능하다.

---
요구사항12) - 싱글톤 방식으로 *Dao, *JdbcTemplate 수정 완료
> 컨트롤러에서 접근하는 DAO 클래스에서 DB 접근 로직을 구현할 때 사용하는 JdbcTemplate은 인스턴스를 여러개 생성할 필요없다.
> 인스턴스를 하나만 생성하도록 구현한다.

---
요구사항13) 
> 질문 삭제 기능을 구현한다. 질문 삭제가 가능한 경우는 다음과 같다.
> "답변이 경우 질문 삭제가 가능하다. 질문자와 답변자가 모두 같은 경우 질문 삭제가 가능하다. 질문자와 답변자가 다른 답변이 하나라도 있으면 질문을 삭제할 수 없다"
> 이 질문 삭제 기능은 웹과 모바일 앱에서 모두 지원하려고 한다.
> 웹 브라우저를 통해 접근했을 때 JspView를 활용 해목록 페이지("redirect:/")로 이동하고,
> 모바일 앱을 지원하기 위해 JsonView를 활용해 응답 결과를 JSON으로 전송하려고 한다.
> 이를 지원하려면 두 개의 컨트롤러가 필요하다. 각 컨트롤러를 구현해보면 많은 중복이 발생한다. 각 컨트롤러에서 발생하는 중복을 제거한다.
